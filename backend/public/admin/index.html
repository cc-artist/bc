<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>赛博佛祖 - 管理后台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-form {
            width: 100%;
            max-width: 400px;
        }
        .hidden {
            display: none;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-form glass rounded-2xl p-8 shadow-xl fade-in">
            <div class="text-center mb-8">
                <div class="inline-block glass rounded-full p-4 mb-4">
                    <i class="fas fa-buddha text-5xl text-yellow-300"></i>
                </div>
                <h1 class="text-3xl font-bold text-white mb-2">赛博佛祖管理后台</h1>
                <p class="text-white/80">请登录以继续</p>
            </div>
            
            <form id="loginForm">
                <div class="mb-6">
                    <label for="username" class="block text-white/80 mb-2 text-sm font-medium">用户名</label>
                    <div class="relative">
                        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50">
                            <i class="fas fa-user"></i>
                        </span>
                        <input type="text" id="username" name="username" 
                               class="w-full pl-10 pr-4 py-3 rounded-xl bg-white/10 text-white border border-white/20 focus:outline-none focus:border-yellow-300 focus:ring-2 focus:ring-yellow-300/30 transition-all"
                               placeholder="输入用户名" required>
                    </div>
                </div>
                
                <div class="mb-6">
                    <label for="password" class="block text-white/80 mb-2 text-sm font-medium">密码</label>
                    <div class="relative">
                        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50">
                            <i class="fas fa-lock"></i>
                        </span>
                        <input type="password" id="password" name="password" 
                               class="w-full pl-10 pr-10 py-3 rounded-xl bg-white/10 text-white border border-white/20 focus:outline-none focus:border-yellow-300 focus:ring-2 focus:ring-yellow-300/30 transition-all"
                               placeholder="输入密码" required>
                        <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 cursor-pointer" id="togglePassword">
                            <i class="fas fa-eye"></i>
                        </span>
                    </div>
                </div>
                
                <div class="mb-6">
                    <div class="flex items-center">
                        <input type="checkbox" id="remember" name="remember" 
                               class="mr-2 text-yellow-300 focus:ring-yellow-300/30">
                        <label for="remember" class="text-white/80 text-sm">记住我</label>
                    </div>
                </div>
                
                <div class="mb-4">
                    <button type="submit" 
                            class="w-full py-3 rounded-xl bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-semibold hover:shadow-lg hover:shadow-yellow-500/20 transition-all transform hover:scale-105">
                        <i class="fas fa-sign-in-alt mr-2"></i> 登录
                    </button>
                </div>
                
                <div id="loginError" class="hidden bg-red-500/30 text-red-200 p-3 rounded-lg text-sm">
                    <i class="fas fa-exclamation-circle mr-2"></i>
                    <span id="errorMessage">用户名或密码错误</span>
                </div>
            </form>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="container mx-auto px-4 py-8 hidden">
        <!-- Header with Logout -->
        <header class="mb-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <div class="inline-block glass rounded-full p-3 mr-4">
                        <i class="fas fa-buddha text-4xl text-yellow-300"></i>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-white">赛博佛祖管理后台</h1>
                        <p class="text-white/80">Cyber Buddha Online Blessing Management Console</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-white/80 text-sm">
                        <i class="fas fa-user-circle mr-2"></i>
                        <span id="currentUser">管理员</span>
                    </span>
                    <button id="logoutBtn" class="bg-white/10 hover:bg-white/20 rounded-lg px-4 py-2 text-white text-sm flex items-center transition-all">
                        <i class="fas fa-sign-out-alt mr-2"></i> 退出登录
                    </button>
                </div>
            </div>
        </header>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Service Status Card -->
            <div class="glass rounded-2xl p-6 shadow-xl">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-white">服务状态</h3>
                    <div class="bg-green-500/30 rounded-full p-3">
                        <i class="fas fa-heartbeat text-green-300 text-2xl"></i>
                    </div>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="text-white/80">后端API</span>
                        <span class="bg-green-500/30 text-green-300 px-3 py-1 rounded-full text-sm">运行中</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-white/80">数据库连接</span>
                        <span class="bg-green-500/30 text-green-300 px-3 py-1 rounded-full text-sm">已连接</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-white/80">前端服务</span>
                        <span class="bg-green-500/30 text-green-300 px-3 py-1 rounded-full text-sm">运行中</span>
                    </div>
                </div>
            </div>

            <!-- Statistics Card -->
            <div class="glass rounded-2xl p-6 shadow-xl">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-white">系统统计</h3>
                    <div class="bg-blue-500/30 rounded-full p-3">
                        <i class="fas fa-chart-line text-blue-300 text-2xl"></i>
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-white/80">总加持次数</span>
                            <span class="text-white text-2xl font-bold">1,234</span>
                        </div>
                        <div class="w-full bg-white/20 rounded-full h-2">
                            <div class="bg-gradient-to-r from-yellow-300 to-orange-400 h-2 rounded-full" style="width: 75%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-white/80">今日新增</span>
                            <span class="text-white text-2xl font-bold">89</span>
                        </div>
                        <div class="w-full bg-white/20 rounded-full h-2">
                            <div class="bg-gradient-to-r from-green-300 to-teal-400 h-2 rounded-full" style="width: 45%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Statistics Card -->
            <div class="glass rounded-2xl p-6 shadow-xl">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-white">支付统计</h3>
                    <div class="bg-purple-500/30 rounded-full p-3">
                        <i class="fas fa-wallet text-purple-300 text-2xl"></i>
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-white/80">今日收入</span>
                            <span class="text-white text-2xl font-bold">¥1,000</span>
                        </div>
                        <div class="w-full bg-white/20 rounded-full h-2">
                            <div class="bg-gradient-to-r from-green-300 to-emerald-400 h-2 rounded-full" style="width: 60%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-white/80">总订单数</span>
                            <span class="text-white text-2xl font-bold">528</span>
                        </div>
                        <div class="w-full bg-white/20 rounded-full h-2">
                            <div class="bg-gradient-to-r from-blue-300 to-cyan-400 h-2 rounded-full" style="width: 85%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Server Info Card -->
            <div class="glass rounded-2xl p-6 shadow-xl">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-white">服务器信息</h3>
                    <div class="bg-cyan-500/30 rounded-full p-3">
                        <i class="fas fa-server text-cyan-300 text-2xl"></i>
                    </div>
                </div>
                <div class="space-y-2 text-white/80">
                    <div class="flex justify-between">
                        <span>Node.js版本</span>
                        <span class="text-white">v20.17.6</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Express版本</span>
                        <span class="text-white">v4.18.2</span>
                    </div>
                    <div class="flex justify-between">
                        <span>运行环境</span>
                        <span class="text-white">开发环境</span>
                    </div>
                    <div class="flex justify-between">
                        <span>启动时间</span>
                        <span class="text-white" id="startTime">2026-02-07 18:00:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Management Sections -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- API Endpoints with Preview -->
            <div class="glass rounded-2xl p-6 shadow-xl lg:col-span-2">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-white">API接口</h3>
                    <div class="bg-cyan-500/30 rounded-full p-2">
                        <i class="fas fa-code text-cyan-300 text-xl"></i>
                    </div>
                </div>
                
                <!-- API Tabs -->
                <div class="mb-4 flex space-x-2 border-b border-white/20">
                    <button class="api-tab text-white px-4 py-2 rounded-t-lg font-medium" data-tab="endpoints">接口列表</button>
                    <button class="api-tab text-white/60 px-4 py-2 rounded-t-lg font-medium" data-tab="docs">API文档</button>
                    <button class="api-tab text-white/60 px-4 py-2 rounded-t-lg font-medium" data-tab="test">API测试</button>
                </div>
                
                <!-- API Endpoints Tab -->
                <div id="endpointsTab" class="api-content">
                    <div class="space-y-3">
                        <div class="bg-white/10 rounded-lg p-4 hover:bg-white/20 transition-all cursor-pointer api-item" data-endpoint="/api/health">
                            <div class="flex items-center">
                                <span class="bg-green-500/30 text-green-300 px-3 py-1 rounded text-xs font-mono mr-3">GET</span>
                                <span class="text-white font-mono">/api/health</span>
                                <span class="ml-auto bg-blue-500/30 text-blue-200 px-2 py-1 rounded text-xs">v1</span>
                            </div>
                            <p class="text-white/70 text-sm mt-1">服务健康检查</p>
                        </div>
                        <div class="bg-white/10 rounded-lg p-4 hover:bg-white/20 transition-all cursor-pointer api-item" data-endpoint="/api/bless">
                            <div class="flex items-center">
                                <span class="bg-blue-500/30 text-blue-300 px-3 py-1 rounded text-xs font-mono mr-3">POST</span>
                                <span class="text-white font-mono">/api/bless</span>
                                <span class="ml-auto bg-blue-500/30 text-blue-200 px-2 py-1 rounded text-xs">v1</span>
                            </div>
                            <p class="text-white/70 text-sm mt-1">申请加持服务</p>
                        </div>
                        <div class="bg-white/10 rounded-lg p-4 hover:bg-white/20 transition-all cursor-pointer api-item" data-endpoint="/api/stats">
                            <div class="flex items-center">
                                <span class="bg-purple-500/30 text-purple-300 px-3 py-1 rounded text-xs font-mono mr-3">GET</span>
                                <span class="text-white font-mono">/api/stats</span>
                                <span class="ml-auto bg-blue-500/30 text-blue-200 px-2 py-1 rounded text-xs">v1</span>
                            </div>
                            <p class="text-white/70 text-sm mt-1">获取统计数据</p>
                        </div>
                        <div class="bg-white/10 rounded-lg p-4 hover:bg-white/20 transition-all cursor-pointer api-item" data-endpoint="/api/payments">
                            <div class="flex items-center">
                                <span class="bg-green-500/30 text-green-300 px-3 py-1 rounded text-xs font-mono mr-3">GET</span>
                                <span class="text-white font-mono">/api/payments</span>
                                <span class="ml-auto bg-blue-500/30 text-blue-200 px-2 py-1 rounded text-xs">v1</span>
                            </div>
                            <p class="text-white/70 text-sm mt-1">获取支付订单</p>
                        </div>
                        <div class="bg-white/10 rounded-lg p-4 hover:bg-white/20 transition-all cursor-pointer api-item" data-endpoint="/api/payments/:id">
                            <div class="flex items-center">
                                <span class="bg-green-500/30 text-green-300 px-3 py-1 rounded text-xs font-mono mr-3">GET</span>
                                <span class="text-white font-mono">/api/payments/:id</span>
                                <span class="ml-auto bg-blue-500/30 text-blue-200 px-2 py-1 rounded text-xs">v1</span>
                            </div>
                            <p class="text-white/70 text-sm mt-1">获取单个支付订单</p>
                        </div>
                    </div>
                </div>
                
                <!-- API Docs Tab -->
                <div id="docsTab" class="api-content hidden">
                    <div class="bg-white/10 rounded-lg p-4">
                        <h4 class="text-white font-medium mb-3">API文档预览</h4>
                        <div class="text-white/70 text-sm space-y-4">
                            <p><strong class="text-white">基础URL:</strong> http://localhost:3001</p>
                            <p><strong class="text-white">认证方式:</strong> Bearer Token (在请求头中添加 Authorization: Bearer {token})</p>
                            <p><strong class="text-white">响应格式:</strong> JSON</p>
                            <div class="bg-white/5 p-3 rounded-lg">
                                <h5 class="text-white font-medium mb-2">/api/health - GET</h5>
                                <p class="mb-2">返回服务健康状态</p>
                                <div class="space-y-2">
                                    <div>
                                        <span class="text-white font-medium">响应示例:</span>
                                        <pre class="bg-black/50 p-3 rounded mt-1 text-xs overflow-x-auto">
{"status":"ok","timestamp":"2026-02-07T15:00:16.308Z"}</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- API Test Tab -->
                <div id="testTab" class="api-content hidden">
                    <div class="bg-white/10 rounded-lg p-4">
                        <h4 class="text-white font-medium mb-3">API测试工具</h4>
                        <div class="space-y-3">
                            <div class="flex space-x-2">
                                <select class="bg-white/10 text-white border border-white/20 rounded-lg px-3 py-2 flex-1">
                                    <option>GET</option>
                                    <option>POST</option>
                                    <option>PUT</option>
                                    <option>DELETE</option>
                                </select>
                                <input type="text" placeholder="/api/health" 
                                       class="bg-white/10 text-white border border-white/20 rounded-lg px-3 py-2 flex-2">
                                <button class="bg-green-500/30 hover:bg-green-500/40 text-green-200 px-4 py-2 rounded-lg transition-all">
                                    <i class="fas fa-play mr-2"></i> 发送
                                </button>
                            </div>
                            <div class="bg-black/50 rounded-lg p-3 h-40 overflow-auto text-xs text-green-200">
                                <pre id="apiTestResult">// 测试结果将显示在这里
// 点击"发送"按钮开始测试</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions with Payment Management -->
            <div class="glass rounded-2xl p-6 shadow-xl">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-white">快捷操作</h3>
                    <div class="bg-pink-500/30 rounded-full p-2">
                        <i class="fas fa-bolt text-pink-300 text-xl"></i>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <button class="bg-white/10 hover:bg-white/20 rounded-lg p-4 text-center transition-all transform hover:scale-105">
                        <i class="fas fa-database text-2xl text-blue-300 mb-2"></i>
                        <div class="text-white font-medium">数据库管理</div>
                        <div class="text-white/70 text-xs">查看/管理数据</div>
                    </button>
                    <button class="bg-white/10 hover:bg-white/20 rounded-lg p-4 text-center transition-all transform hover:scale-105">
                        <i class="fas fa-image text-2xl text-green-300 mb-2"></i>
                        <div class="text-white font-medium">图片管理</div>
                        <div class="text-white/70 text-xs">管理加持图片</div>
                    </button>
                    <button class="bg-white/10 hover:bg-white/20 rounded-lg p-4 text-center transition-all transform hover:scale-105">
                        <i class="fas fa-chart-bar text-2xl text-yellow-300 mb-2"></i>
                        <div class="text-white font-medium">统计报表</div>
                        <div class="text-white/70 text-xs">查看详细统计</div>
                    </button>
                    <button id="paymentMgmtBtn" class="bg-white/10 hover:bg-white/20 rounded-lg p-4 text-center transition-all transform hover:scale-105">
                        <i class="fas fa-credit-card text-2xl text-purple-300 mb-2"></i>
                        <div class="text-white font-medium">支付管理</div>
                        <div class="text-white/70 text-xs">管理支付订单</div>
                    </button>
                    <button class="bg-white/10 hover:bg-white/20 rounded-lg p-4 text-center transition-all transform hover:scale-105 col-span-2">
                        <i class="fas fa-cog text-2xl text-cyan-300 mb-2"></i>
                        <div class="text-white font-medium">系统设置</div>
                        <div class="text-white/70 text-xs">配置系统参数</div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Payment Management Section -->
        <div class="glass rounded-2xl p-6 shadow-xl">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-white">支付管理</h3>
                <div class="bg-purple-500/30 rounded-full p-2">
                    <i class="fas fa-credit-card text-purple-300 text-xl"></i>
                </div>
            </div>
            
            <!-- Payment Filters -->
            <div class="flex flex-wrap gap-3 mb-6">
                <div class="flex flex-wrap gap-3 mr-4">
                    <button class="payment-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-filter="all">全部</button>
                    <button class="payment-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-filter="completed">已完成</button>
                    <button class="payment-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-filter="pending">待处理</button>
                    <button class="payment-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-filter="failed">失败</button>
                    <button class="payment-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-filter="cancelled">已取消</button>
                    <button class="payment-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-filter="refunded">已退款</button>
                </div>
                <div class="flex flex-wrap gap-3 mr-4">
                    <button class="payment-platform-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-platform="all">所有平台</button>
                    <button class="payment-platform-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-platform="paypal">PayPal</button>
                    <button class="payment-platform-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-platform="pingpong">PingPong</button>
                    <button class="payment-platform-filter bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all" data-platform="unknown">未知平台</button>
                </div>
                <div class="ml-auto">
                    <input type="text" placeholder="搜索订单号或用户" 
                           class="bg-white/10 text-white border border-white/20 rounded-lg px-3 py-2 text-sm w-64">
                </div>
            </div>
            
            <!-- Payment Table -->
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead>
                        <tr class="border-b border-white/20">
                            <th class="text-white/80 py-3 px-4 text-sm font-medium">订单号</th>
                            <th class="text-white/80 py-3 px-4 text-sm font-medium">用户</th>
                            <th class="text-white/80 py-3 px-4 text-sm font-medium">金额</th>
                            <th class="text-white/80 py-3 px-4 text-sm font-medium">支付平台</th>
                            <th class="text-white/80 py-3 px-4 text-sm font-medium">状态</th>
                            <th class="text-white/80 py-3 px-4 text-sm font-medium">创建时间</th>
                            <th class="text-white/80 py-3 px-4 text-sm font-medium">操作</th>
                        </tr>
                    </thead>
                    <tbody id="paymentTableBody">
                        <!-- Payment rows will be dynamically added here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-12 text-center text-white/60 text-sm">
            <p>&copy; 2026 赛博佛祖在线加持服务 | Cyber Buddha Online Blessing Service</p>
            <p class="mt-1">技术支持：Digital Dharma Team</p>
        </footer>
    </div>

    <!-- Detail Page -->
    <div id="detailPage" class="container mx-auto px-4 py-8 hidden">
        <!-- Header with Back Button -->
        <header class="mb-8">
            <div class="flex items-center">
                <button id="backBtn" class="bg-white/10 hover:bg-white/20 rounded-lg p-3 mr-4 transition-all">
                    <i class="fas fa-arrow-left text-white text-xl"></i>
                </button>
                <div>
                    <h1 class="text-3xl font-bold text-white" id="detailTitle">详情页</h1>
                    <p class="text-white/80" id="detailSubtitle">查看详细信息</p>
                </div>
            </div>
        </header>

        <!-- Detail Content -->
        <div id="detailContent" class="glass rounded-2xl p-6 shadow-xl">
            <!-- Loading State -->
            <div id="loadingState" class="text-center py-12">
                <div class="inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-300 mb-4"></div>
                <p class="text-white text-lg">正在加载详细数据...</p>
            </div>

            <!-- Error State -->
            <div id="errorState" class="text-center py-12 hidden">
                <div class="inline-block bg-red-500/30 rounded-full p-4 mb-4">
                    <i class="fas fa-exclamation-triangle text-red-300 text-4xl"></i>
                </div>
                <p class="text-white text-lg mb-2">加载失败</p>
                <p class="text-white/70">无法获取详细数据，请稍后重试</p>
                <button id="retryBtn" class="mt-4 bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-xl transition-all">
                    <i class="fas fa-sync-alt mr-2"></i> 重试
                </button>
            </div>

            <!-- Content Sections -->
            <div id="contentSections" class="hidden">
                <!-- Service Status Detail -->
                <div id="serviceStatusDetail" class="detail-section hidden">
                    <h2 class="text-2xl font-bold text-white mb-6">服务状态详情</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4 flex items-center">
                                <i class="fas fa-server mr-2 text-cyan-300"></i>
                                后端服务
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">状态</span>
                                    <span id="backendStatus" class="bg-green-500/30 text-green-300 px-3 py-1 rounded-full text-sm">运行中</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">响应时间</span>
                                    <span id="apiResponseTime" class="text-white">23ms</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4 flex items-center">
                                <i class="fas fa-database mr-2 text-blue-300"></i>
                                数据库连接
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">状态</span>
                                    <span id="dbStatus" class="bg-green-500/30 text-green-300 px-3 py-1 rounded-full text-sm">已连接</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4 flex items-center">
                                <i class="fas fa-globe mr-2 text-green-300"></i>
                                前端服务
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">状态</span>
                                    <span id="frontendStatus" class="bg-green-500/30 text-green-300 px-3 py-1 rounded-full text-sm">运行中</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4 flex items-center">
                                <i class="fas fa-microchip mr-2 text-yellow-300"></i>
                                系统资源
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">CPU使用率</span>
                                        <span id="cpuUsage" class="text-white">32%</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-2">
                                        <div id="cpuUsageBar" class="bg-gradient-to-r from-yellow-300 to-orange-400 h-2 rounded-full" style="width: 32%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">内存使用率</span>
                                        <span id="memoryUsage" class="text-white">45%</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-2">
                                        <div id="memoryUsageBar" class="bg-gradient-to-r from-blue-300 to-cyan-400 h-2 rounded-full" style="width: 45%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">磁盘空间</span>
                                        <span id="diskSpace" class="text-white">68%</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-2">
                                        <div id="diskSpaceBar" class="bg-gradient-to-r from-green-300 to-emerald-400 h-2 rounded-full" style="width: 68%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Service Status History Table -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-history mr-2 text-yellow-300"></i>
                            服务状态历史记录
                        </h3>
                        <div class="bg-white/10 rounded-xl p-5 overflow-x-auto">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="border-b border-white/20">
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">时间戳</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">CPU使用率</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">内存使用率</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">磁盘使用率</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">API响应时间</th>
                                    </tr>
                                </thead>
                                <tbody id="serviceStatusHistoryTable">
                                    <!-- Table rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-white/70 text-sm">
                        <p><strong>更新时间：</strong><span id="statusUpdatedAt"></span></p>
                    </div>
                </div>

                <!-- Statistics Detail -->
                <div id="statisticsDetail" class="detail-section hidden">
                    <h2 class="text-2xl font-bold text-white mb-6">系统统计详情</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white/10 rounded-xl p-5 text-center">
                            <div class="text-4xl font-bold text-yellow-300 mb-2" id="totalBlessingsDetail">1,234</div>
                            <div class="text-white/80">总加持次数</div>
                        </div>
                        <div class="bg-white/10 rounded-xl p-5 text-center">
                            <div class="text-4xl font-bold text-green-300 mb-2" id="todayBlessingsDetail">89</div>
                            <div class="text-white/80">今日新增</div>
                        </div>
                        <div class="bg-white/10 rounded-xl p-5 text-center">
                            <div class="text-4xl font-bold text-blue-300 mb-2" id="totalUsersDetail">567</div>
                            <div class="text-white/80">总用户数</div>
                        </div>
                    </div>
                    <div class="mt-6">
                        <h3 class="text-xl font-semibold text-white mb-4">加持趋势</h3>
                        <div class="bg-white/10 rounded-xl p-5">
                            <!-- Simple chart placeholder -->
                            <div class="h-64 flex items-center justify-center">
                                <div class="text-white/70">
                                    <i class="fas fa-chart-line text-4xl mb-2 opacity-50"></i>
                                    <p>加持趋势图表</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Blessing Statistics Detail Table -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-list-alt mr-2 text-blue-300"></i>
                            加持统计明细
                        </h3>
                        <div class="bg-white/10 rounded-xl p-5 overflow-x-auto">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="border-b border-white/20">
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">日期</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">加持次数</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">新增用户数</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">成功率</th>
                                    </tr>
                                </thead>
                                <tbody id="blessingStatisticsTable">
                                    <!-- Table rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Payment Statistics Detail -->
                <div id="paymentStatisticsDetail" class="detail-section hidden">
                    <h2 class="text-2xl font-bold text-white mb-6">支付统计详情</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4">收入统计</h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">今日收入</span>
                                        <span class="text-2xl font-bold text-white" id="todayRevenueDetail">¥1,000</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-2">
                                        <div class="bg-gradient-to-r from-green-300 to-emerald-400 h-2 rounded-full" style="width: 60%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">本月收入</span>
                                        <span class="text-2xl font-bold text-white" id="monthRevenueDetail">¥23,456</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-2">
                                        <div class="bg-gradient-to-r from-blue-300 to-cyan-400 h-2 rounded-full" style="width: 75%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">总收入</span>
                                        <span class="text-2xl font-bold text-white" id="totalRevenueDetail">¥123,456</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-2">
                                        <div class="bg-gradient-to-r from-purple-300 to-pink-400 h-2 rounded-full" style="width: 90%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4">订单统计</h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">今日订单</span>
                                        <span class="text-2xl font-bold text-white" id="todayOrdersDetail">12</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">总订单数</span>
                                        <span class="text-2xl font-bold text-white" id="totalOrdersDetail">528</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">成功率</span>
                                        <span class="text-2xl font-bold text-white" id="successRateDetail">92%</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">平均客单价</span>
                                        <span class="text-2xl font-bold text-white" id="avgOrderValueDetail">¥234</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6">
                        <h3 class="text-xl font-semibold text-white mb-4">订单状态分布</h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="bg-white/10 rounded-xl p-4 text-center">
                                <div class="text-2xl font-bold text-green-300 mb-1" id="completedOrdersDetail">486</div>
                                <div class="text-white/70 text-sm">已完成</div>
                            </div>
                            <div class="bg-white/10 rounded-xl p-4 text-center">
                                <div class="text-2xl font-bold text-yellow-300 mb-1" id="pendingOrdersDetail">32</div>
                                <div class="text-white/70 text-sm">待处理</div>
                            </div>
                            <div class="bg-white/10 rounded-xl p-4 text-center">
                                <div class="text-2xl font-bold text-red-300 mb-1" id="failedOrdersDetail">10</div>
                                <div class="text-white/70 text-sm">失败</div>
                            </div>
                            <div class="bg-white/10 rounded-xl p-4 text-center">
                                <div class="text-2xl font-bold text-blue-300 mb-1" id="cancelledOrdersDetail">0</div>
                                <div class="text-white/70 text-sm">已取消</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Payments Table -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-list-alt mr-2 text-purple-300"></i>
                            最近支付记录
                        </h3>
                        <div class="bg-white/10 rounded-xl p-5 overflow-x-auto">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="border-b border-white/20">
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">订单号</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">用户</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">金额</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">状态</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">时间</th>
                                    </tr>
                                </thead>
                                <tbody id="recentPaymentsTable">
                                    <!-- Table rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Payment Method Distribution Table -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-credit-card mr-2 text-green-300"></i>
                            收入按支付方式分布
                        </h3>
                        <div class="bg-white/10 rounded-xl p-5 overflow-x-auto">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="border-b border-white/20">
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">支付方式</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">订单数</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">金额</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">占比</th>
                                    </tr>
                                </thead>
                                <tbody id="paymentMethodTable">
                                    <!-- Table rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Server Info Detail -->
                <div id="serverInfoDetail" class="detail-section hidden">
                    <h2 class="text-2xl font-bold text-white mb-6">服务器信息详情</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4 flex items-center">
                                <i class="fas fa-server mr-2 text-cyan-300"></i>
                                服务器基本信息
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">Node.js版本</span>
                                    <span class="text-white font-mono">v20.17.6</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">Express版本</span>
                                    <span class="text-white font-mono">v4.18.2</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">运行环境</span>
                                    <span class="text-white">开发环境</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">启动时间</span>
                                    <span id="serverStartTime" class="text-white">2026-02-07 18:00:00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">运行时长</span>
                                    <span id="serverUptime" class="text-white">2天 4小时 30分钟</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4 flex items-center">
                                <i class="fas fa-microchip mr-2 text-yellow-300"></i>
                                系统资源使用
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">CPU使用率</span>
                                        <span class="text-white">32%</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-3">
                                        <div class="bg-gradient-to-r from-yellow-300 to-orange-400 h-3 rounded-full" style="width: 32%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">内存使用率</span>
                                        <span class="text-white">45%</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-3">
                                        <div class="bg-gradient-to-r from-blue-300 to-cyan-400 h-3 rounded-full" style="width: 45%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">磁盘空间</span>
                                        <span class="text-white">68%</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-3">
                                        <div class="bg-gradient-to-r from-green-300 to-emerald-400 h-3 rounded-full" style="width: 68%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-white/80">API响应时间</span>
                                        <span class="text-white">23ms</span>
                                    </div>
                                    <div class="w-full bg-white/20 rounded-full h-3">
                                        <div class="bg-gradient-to-r from-purple-300 to-pink-400 h-3 rounded-full" style="width: 15%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Server Resource History Table -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-chart-line mr-2 text-cyan-300"></i>
                            服务器资源使用历史
                        </h3>
                        <div class="bg-white/10 rounded-xl p-5 overflow-x-auto">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="border-b border-white/20">
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">时间戳</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">CPU使用率</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">内存使用率</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">磁盘使用率</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">网络流量</th>
                                    </tr>
                                </thead>
                                <tbody id="serverResourceHistoryTable">
                                    <!-- Table rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- API Detail -->
                <div id="apiDetail" class="detail-section hidden">
                    <h2 class="text-2xl font-bold text-white mb-6">API接口详情</h2>
                    <div class="bg-white/10 rounded-xl p-5 mb-6">
                        <h3 class="text-white font-medium mb-4 flex items-center">
                            <i class="fas fa-info-circle mr-2 text-cyan-300"></i>
                            API基本信息
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <span class="text-white/80 mr-2">方法:</span>
                                <span id="apiMethod" class="bg-green-500/30 text-green-300 px-3 py-1 rounded text-xs font-mono">GET</span>
                            </div>
                            <div>
                                <span class="text-white/80 mr-2">端点:</span>
                                <span id="apiEndpoint" class="text-white font-mono">/api/health</span>
                            </div>
                            <div>
                                <span class="text-white/80 mr-2">版本:</span>
                                <span class="bg-blue-500/30 text-blue-200 px-2 py-1 rounded text-xs">v1</span>
                            </div>
                            <div>
                                <span class="text-white/80 mr-2">描述:</span>
                                <span id="apiDescription" class="text-white">服务健康检查</span>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4">请求参数</h3>
                            <div id="apiParams" class="text-white/70">
                                <p>无请求参数</p>
                            </div>
                        </div>
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4">响应示例</h3>
                            <pre id="apiResponseExample" class="bg-black/50 p-4 rounded-lg text-xs overflow-x-auto text-green-200">
{"status":"ok","timestamp":"2026-02-07T15:00:16.308Z"}</pre>
                        </div>
                    </div>
                    <div class="mt-6 bg-white/10 rounded-xl p-5">
                        <h3 class="text-white font-medium mb-4">API测试</h3>
                        <div class="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
                            <button id="testApiBtn" class="bg-green-500/30 hover:bg-green-500/40 text-green-200 px-6 py-3 rounded-xl transition-all flex-1">
                                <i class="fas fa-play mr-2"></i> 测试API
                            </button>
                            <button id="copyApiBtn" class="bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-xl transition-all">
                                <i class="fas fa-copy mr-2"></i> 复制URL
                            </button>
                        </div>
                        <div id="apiTestResult" class="mt-4 bg-black/50 p-4 rounded-lg text-xs overflow-x-auto hidden">
                            <pre class="text-green-200"></pre>
                        </div>
                    </div>
                    
                    <!-- API Request Statistics Table -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-chart-bar mr-2 text-purple-300"></i>
                            API请求统计
                        </h3>
                        <div class="bg-white/10 rounded-xl p-5 overflow-x-auto">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="border-b border-white/20">
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">时间</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">请求方法</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">端点</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">状态码</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">响应时间</th>
                                    </tr>
                                </thead>
                                <tbody id="apiRequestStatsTable">
                                    <!-- Table rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Quick Action Detail -->
                <div id="quickActionDetail" class="detail-section hidden">
                    <h2 class="text-2xl font-bold text-white mb-6" id="quickActionTitle">功能详情</h2>
                    <div class="bg-white/10 rounded-xl p-5 mb-6">
                        <p class="text-white/70 mb-4" id="quickActionDescription">正在加载功能详情...</p>
                        <div class="flex justify-center">
                            <button id="actionBtn" class="bg-white/10 hover:bg-white/20 text-white px-8 py-3 rounded-xl transition-all">
                                <i class="fas fa-check mr-2"></i> 执行操作
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Payment Detail -->
                <div id="paymentDetail" class="detail-section hidden">
                    <h2 class="text-2xl font-bold text-white mb-6">支付详情</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/10 rounded-xl p-5">
                            <h3 class="text-white font-medium mb-4 flex items-center">
                                <i class="fas fa-credit-card mr-2 text-purple-300"></i>
                                订单信息
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">订单号</span>
                                    <span id="paymentId" class="text-white font-mono">PAY20260207001</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">用户</span>
                                    <span id="paymentUser" class="text-white">张三</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">金额</span>
                                    <span id="paymentAmount" class="text-white text-xl font-bold">¥100</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">状态</span>
                                    <span id="paymentStatus" class="bg-green-500/30 text-green-300 px-3 py-1 rounded-full text-sm">已完成</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white/80">创建时间</span>
                                    <span id="paymentCreatedAt" class="text-white">2026-02-07 10:30:00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Payment Event History Table -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-history mr-2 text-blue-300"></i>
                            支付事件历史
                        </h3>
                        <div class="bg-white/10 rounded-xl p-5 overflow-x-auto">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="border-b border-white/20">
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">时间</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">事件类型</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">状态</th>
                                        <th class="text-white/80 py-3 px-4 text-left text-sm font-medium">描述</th>
                                    </tr>
                                </thead>
                                <tbody id="paymentEventHistoryTable">
                                    <!-- Table rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set current time as start time
        document.getElementById('startTime').textContent = new Date().toLocaleString('zh-CN');

        // Global variables
        let isLoggedIn = false;
        let currentUser = null;
        let paymentData = [];

        // Mock payment data
        const mockPayments = [
            // Completed orders
            { id: 'PAY20260207001', user: '张三', amount: 100, status: 'completed', createdAt: '2026-02-07 10:30:00' },
            { id: 'PAY20260207002', user: '李四', amount: 200, status: 'completed', createdAt: '2026-02-07 11:15:00' },
            { id: 'PAY20260207005', user: '孙七', amount: 250, status: 'completed', createdAt: '2026-02-07 15:10:00' },
            { id: 'PAY20260207007', user: '吴九', amount: 400, status: 'completed', createdAt: '2026-02-07 17:45:00' },
            { id: 'PAY20260207008', user: '郑十', amount: 120, status: 'completed', createdAt: '2026-02-07 18:20:00' },
            { id: 'PAY20260207009', user: '陈一', amount: 50, status: 'completed', createdAt: '2026-02-07 19:00:00' },
            { id: 'PAY20260207010', user: '林二', amount: 350, status: 'completed', createdAt: '2026-02-07 19:30:00' },
            { id: 'PAY20260207011', user: '黄三', amount: 80, status: 'completed', createdAt: '2026-02-07 20:00:00' },
            
            // Pending orders - ensure we have some pending orders to display
            { id: 'PAY20260207003', user: '王五', amount: 150, status: 'pending', createdAt: '2026-02-07 12:45:00' },
            { id: 'PAY20260207006', user: '周八', amount: 180, status: 'pending', createdAt: '2026-02-07 16:30:00' },
            { id: 'PAY20260207012', user: '刘四', amount: 220, status: 'pending', createdAt: '2026-02-07 20:30:00' },
            { id: 'PAY20260207013', user: '杨五', amount: 130, status: 'pending', createdAt: '2026-02-07 21:00:00' },
            
            // Failed orders
            { id: 'PAY20260207004', user: '赵六', amount: 300, status: 'failed', createdAt: '2026-02-07 14:20:00' },
            { id: 'PAY20260207014', user: '朱六', amount: 90, status: 'failed', createdAt: '2026-02-07 21:30:00' },
            
            // Cancelled orders - add some cancelled orders for better coverage
            { id: 'PAY20260207015', user: '秦七', amount: 170, status: 'cancelled', createdAt: '2026-02-07 22:00:00' },
            { id: 'PAY20260207016', user: '尤八', amount: 240, status: 'cancelled', createdAt: '2026-02-07 22:30:00' },
            
            // Zero amount order - test case for zero transactions
            { id: 'PAY20260207017', user: '许九', amount: 0, status: 'completed', createdAt: '2026-02-07 23:00:00' }
        ];

        // Initialize app
        function initApp() {
            // Check if user is already logged in
            checkLoginStatus();
            
            // Initialize event listeners
            initEventListeners();
            
            // Set payment data
            paymentData = mockPayments;
            
            // Render payment table
            renderPaymentTable();
        }

        // Check login status from localStorage
        function checkLoginStatus() {
            const savedUser = localStorage.getItem('cyberBuddhaUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                isLoggedIn = true;
                showDashboard();
            }
        }

        // Initialize event listeners
        function initEventListeners() {
            // Login form submission
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }

            // Password toggle
            const togglePassword = document.getElementById('togglePassword');
            if (togglePassword) {
                togglePassword.addEventListener('click', togglePasswordVisibility);
            }

            // Logout button
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', handleLogout);
            }

            // API Tabs
            const apiTabs = document.querySelectorAll('.api-tab');
            apiTabs.forEach(tab => {
                tab.addEventListener('click', switchApiTab);
            });

            // API Test button
            const apiTestBtn = document.querySelector('#testTab button');
            if (apiTestBtn) {
                apiTestBtn.addEventListener('click', testApi);
            }

            // Payment filters
            const paymentFilters = document.querySelectorAll('.payment-filter');
            paymentFilters.forEach(filter => {
                filter.addEventListener('click', applyPaymentFilter);
            });

            // Payment management button
            const paymentMgmtBtn = document.getElementById('paymentMgmtBtn');
            if (paymentMgmtBtn) {
                paymentMgmtBtn.addEventListener('click', scrollToPaymentSection);
            }

            // Detail page back button
            const backBtn = document.getElementById('backBtn');
            if (backBtn) {
                backBtn.addEventListener('click', showDashboard);
            }

            // Retry button on error state
            const retryBtn = document.getElementById('retryBtn');
            if (retryBtn) {
                retryBtn.addEventListener('click', () => {
                    if (window.currentDetailType) {
                        showDetailPage(window.currentDetailType, window.currentDetailData);
                    }
                });
            }

            // Dashboard cards click events
            // Service Status Card
            const serviceStatusCard = document.querySelector('.grid > div:nth-child(1)');
            if (serviceStatusCard) {
                serviceStatusCard.addEventListener('click', () => showDetailPage('serviceStatus'));
            }

            // Statistics Card
            const statisticsCard = document.querySelector('.grid > div:nth-child(2)');
            if (statisticsCard) {
                statisticsCard.addEventListener('click', () => showDetailPage('statistics'));
            }

            // Payment Statistics Card
            const paymentStatisticsCard = document.querySelector('.grid > div:nth-child(3)');
            if (paymentStatisticsCard) {
                paymentStatisticsCard.addEventListener('click', () => showDetailPage('paymentStatistics'));
            }

            // Server Info Card
            const serverInfoCard = document.querySelector('.grid > div:nth-child(4)');
            if (serverInfoCard) {
                serverInfoCard.addEventListener('click', () => showDetailPage('serverInfo'));
            }

            // API items click events
            const apiItems = document.querySelectorAll('.api-item');
            apiItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    const endpoint = e.currentTarget.dataset.endpoint;
                    showDetailPage('api', { endpoint });
                });
            });

            // Quick action buttons click events
            const quickActionBtns = document.querySelectorAll('.grid.grid-cols-2 > button');
            quickActionBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const title = e.currentTarget.querySelector('.text-white.font-medium').textContent;
                    const description = e.currentTarget.querySelector('.text-white/70.text-xs').textContent;
                    showDetailPage('quickAction', { title, description });
                });
            });

            // Payment table rows click events
            document.addEventListener('click', (e) => {
                if (e.target.closest('.payment-row')) {
                    const row = e.target.closest('.payment-row');
                    const paymentId = row.dataset.paymentId;
                    const payment = paymentData.find(p => p.id === paymentId);
                    if (payment) {
                        showDetailPage('payment', payment);
                    }
                }
            });
        }

        // Handle login
        async function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const remember = document.getElementById('remember').checked;
            
            // Simple login validation (in production, this should be an API call)
            if (username === 'admin' && password === 'password') {
                currentUser = { username, role: 'admin' };
                isLoggedIn = true;
                
                if (remember) {
                    localStorage.setItem('cyberBuddhaUser', JSON.stringify(currentUser));
                }
                
                showDashboard();
            } else {
                showLoginError('用户名或密码错误');
            }
        }

        // Toggle password visibility
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('password');
            const toggleIcon = document.querySelector('#togglePassword i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.className = 'fas fa-eye-slash';
            } else {
                passwordInput.type = 'password';
                toggleIcon.className = 'fas fa-eye';
            }
        }

        // Show login error
        function showLoginError(message) {
            const errorDiv = document.getElementById('loginError');
            const errorMessage = document.getElementById('errorMessage');
            
            errorMessage.textContent = message;
            errorDiv.classList.remove('hidden');
            
            // Hide error after 3 seconds
            setTimeout(() => {
                errorDiv.classList.add('hidden');
            }, 3000);
        }

        // Show dashboard
        function showDashboard() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('dashboardPage').classList.remove('hidden');
            
            // Update current user display
            document.getElementById('currentUser').textContent = currentUser.username;
            
            // Fetch dashboard data
            fetchData();
        }

        // Handle logout
        function handleLogout() {
            isLoggedIn = false;
            currentUser = null;
            localStorage.removeItem('cyberBuddhaUser');
            
            document.getElementById('dashboardPage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            
            // Reset login form
            document.getElementById('loginForm').reset();
        }

        // Switch API tabs
        function switchApiTab(e) {
            // Remove active class from all tabs
            document.querySelectorAll('.api-tab').forEach(tab => {
                tab.classList.remove('text-white');
                tab.classList.add('text-white/60');
            });
            
            // Add active class to clicked tab
            e.target.classList.remove('text-white/60');
            e.target.classList.add('text-white');
            
            // Hide all API content
            document.querySelectorAll('.api-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected content
            const tabId = e.target.dataset.tab;
            document.getElementById(`${tabId}Tab`).classList.remove('hidden');
        }

        // Test API
        async function testApi() {
            const method = document.querySelector('#testTab select').value;
            const endpoint = document.querySelector('#testTab input[type="text"]').value;
            const resultDiv = document.getElementById('apiTestResult');
            
            resultDiv.textContent = '正在测试...';
            
            try {
                const response = await fetch(endpoint, {
                    method: method
                });
                
                const data = await response.json();
                resultDiv.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                resultDiv.textContent = `测试失败: ${error.message}`;
            }
        }

        // Show Detail Page
        async function showDetailPage(type, data = {}) {
            // Store current detail info for retry functionality
            window.currentDetailType = type;
            window.currentDetailData = data;

            // Show loading state
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('contentSections').classList.add('hidden');

            // Hide all detail sections
            document.querySelectorAll('.detail-section').forEach(section => {
                section.classList.add('hidden');
            });

            // Update title and subtitle based on type
            const titleMap = {
                serviceStatus: '服务状态详情',
                statistics: '系统统计详情',
                paymentStatistics: '支付统计详情',
                serverInfo: '服务器信息详情',
                api: 'API接口详情',
                quickAction: data.title || '功能详情',
                payment: '支付详情'
            };

            const subtitleMap = {
                serviceStatus: '查看服务运行状态和资源使用情况',
                statistics: '查看系统统计数据和趋势',
                paymentStatistics: '查看支付统计和订单分布',
                serverInfo: '查看服务器详细信息',
                api: '查看API接口详细信息和测试',
                quickAction: data.description || '查看功能详情',
                payment: '查看支付订单详细信息'
            };

            document.getElementById('detailTitle').textContent = titleMap[type];
            document.getElementById('detailSubtitle').textContent = subtitleMap[type];

            // Simulate data loading delay
            await new Promise(resolve => setTimeout(resolve, 500));

            try {
                // Load data based on detail type
                switch (type) {
                    case 'serviceStatus':
                        loadServiceStatusData();
                        break;
                    case 'statistics':
                        loadStatisticsData();
                        break;
                    case 'paymentStatistics':
                        loadPaymentStatisticsData();
                        break;
                    case 'serverInfo':
                        loadServerInfoData();
                        break;
                    case 'api':
                        loadApiData(data);
                        break;
                    case 'quickAction':
                        loadQuickActionData(data);
                        break;
                    case 'payment':
                        loadPaymentData(data);
                        break;
                }

                // Show content sections
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('contentSections').classList.remove('hidden');

                // Show detail page
                document.getElementById('dashboardPage').classList.add('hidden');
                document.getElementById('detailPage').classList.remove('hidden');
            } catch (error) {
                console.error('Failed to load detail data:', error);
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('errorState').classList.remove('hidden');
            }
        }

        // Load Service Status Data
        function loadServiceStatusData() {
            // Mock data - in real app, this would be fetched from API
            const serviceStatus = {
                backend: 'running',
                db: 'connected',
                frontend: 'running',
                cpuUsage: 32,
                memoryUsage: 45,
                diskSpace: 68,
                apiResponseTime: 23,
                updatedAt: new Date().toLocaleString('zh-CN')
            };

            // Update UI
            document.getElementById('backendStatus').textContent = serviceStatus.backend === 'running' ? '运行中' : '停止';
            document.getElementById('apiResponseTime').textContent = `${serviceStatus.apiResponseTime}ms`;
            document.getElementById('cpuUsage').textContent = `${serviceStatus.cpuUsage}%`;
            document.getElementById('cpuUsageBar').style.width = `${serviceStatus.cpuUsage}%`;
            document.getElementById('memoryUsage').textContent = `${serviceStatus.memoryUsage}%`;
            document.getElementById('memoryUsageBar').style.width = `${serviceStatus.memoryUsage}%`;
            document.getElementById('diskSpace').textContent = `${serviceStatus.diskSpace}%`;
            document.getElementById('diskSpaceBar').style.width = `${serviceStatus.diskSpace}%`;
            document.getElementById('statusUpdatedAt').textContent = serviceStatus.updatedAt;

            // Generate and render service status history table
            renderServiceStatusHistoryTable();

            // Show section
            document.getElementById('serviceStatusDetail').classList.remove('hidden');
        }

        // Generate service status history data
        function generateServiceStatusHistoryData() {
            const history = [];
            const now = new Date();
            
            // Generate data for last 24 hours, hourly
            for (let i = 23; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60 * 60 * 1000);
                const cpuUsage = Math.floor(Math.random() * 50) + 10; // 10-60%
                const memoryUsage = Math.floor(Math.random() * 50) + 20; // 20-70%
                const diskUsage = Math.floor(Math.random() * 20) + 60; // 60-80%
                const apiResponseTime = Math.floor(Math.random() * 50) + 10; // 10-60ms
                
                history.push({
                    timestamp: time.toLocaleString('zh-CN'),
                    cpuUsage: `${cpuUsage}%`,
                    memoryUsage: `${memoryUsage}%`,
                    diskUsage: `${diskUsage}%`,
                    apiResponseTime: `${apiResponseTime}ms`
                });
            }
            
            return history;
        }

        // Render service status history table
        function renderServiceStatusHistoryTable() {
            const tableBody = document.getElementById('serviceStatusHistoryTable');
            if (!tableBody) return;
            
            const historyData = generateServiceStatusHistoryData();
            
            tableBody.innerHTML = '';
            
            historyData.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-all';
                row.innerHTML = `
                    <td class="text-white/80 py-3 px-4 text-sm">${item.timestamp}</td>
                    <td class="text-white py-3 px-4">${item.cpuUsage}</td>
                    <td class="text-white py-3 px-4">${item.memoryUsage}</td>
                    <td class="text-white py-3 px-4">${item.diskUsage}</td>
                    <td class="text-white py-3 px-4">${item.apiResponseTime}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Load Statistics Data
        function loadStatisticsData() {
            // Mock data - in real app, this would be fetched from API
            const stats = {
                totalBlessings: 1234,
                todayBlessings: 89,
                totalUsers: 567
            };

            // Update UI
            document.getElementById('totalBlessingsDetail').textContent = stats.totalBlessings.toLocaleString();
            document.getElementById('todayBlessingsDetail').textContent = stats.todayBlessings;
            document.getElementById('totalUsersDetail').textContent = stats.totalUsers;

            // Generate and render blessing statistics table
            renderBlessingStatisticsTable();

            // Show section
            document.getElementById('statisticsDetail').classList.remove('hidden');
        }

        // Generate blessing statistics data
        function generateBlessingStatisticsData() {
            const stats = [];
            const now = new Date();
            
            // Generate data for last 7 days
            for (let i = 6; i >= 0; i--) {
                const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);
                
                // Include 0 values in the data for more realistic statistics
                const blessingCount = Math.random() > 0.8 ? 0 : Math.floor(Math.random() * 100) + 30; // 30-130, with 20% chance of 0
                const newUsers = Math.random() > 0.7 ? 0 : Math.floor(Math.random() * 30) + 5; // 5-35, with 30% chance of 0
                const successRate = blessingCount > 0 ? (Math.random() * 10 + 90).toFixed(1) : '0.0'; // 90.0-100.0% or 0.0% if no blessings
                
                stats.push({
                    date: date.toLocaleDateString('zh-CN'),
                    blessingCount: blessingCount.toLocaleString(),
                    newUsers: newUsers.toLocaleString(),
                    successRate: `${successRate}%`
                });
            }
            
            return stats;
        }

        // Render blessing statistics table
        function renderBlessingStatisticsTable() {
            const tableBody = document.getElementById('blessingStatisticsTable');
            if (!tableBody) return;
            
            const statsData = generateBlessingStatisticsData();
            
            tableBody.innerHTML = '';
            
            statsData.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-all';
                row.innerHTML = `
                    <td class="text-white/80 py-3 px-4 text-sm">${item.date}</td>
                    <td class="text-white py-3 px-4">${item.blessingCount}</td>
                    <td class="text-white py-3 px-4">${item.newUsers}</td>
                    <td class="text-white py-3 px-4">${item.successRate}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Load Payment Statistics Data
        function loadPaymentStatisticsData() {
            // Mock data - in real app, this would be fetched from API
            const paymentStats = {
                todayRevenue: 1000,
                monthRevenue: 23456,
                totalRevenue: 123456,
                todayOrders: 12,
                totalOrders: 528,
                successRate: 92,
                avgOrderValue: 234,
                completedOrders: 486,
                pendingOrders: 32,
                failedOrders: 10,
                cancelledOrders: 0
            };

            // Update UI
            document.getElementById('todayRevenueDetail').textContent = `¥${paymentStats.todayRevenue.toLocaleString()}`;
            document.getElementById('monthRevenueDetail').textContent = `¥${paymentStats.monthRevenue.toLocaleString()}`;
            document.getElementById('totalRevenueDetail').textContent = `¥${paymentStats.totalRevenue.toLocaleString()}`;
            document.getElementById('todayOrdersDetail').textContent = paymentStats.todayOrders;
            document.getElementById('totalOrdersDetail').textContent = paymentStats.totalOrders;
            document.getElementById('successRateDetail').textContent = `${paymentStats.successRate}%`;
            document.getElementById('avgOrderValueDetail').textContent = `¥${paymentStats.avgOrderValue}`;
            document.getElementById('completedOrdersDetail').textContent = paymentStats.completedOrders;
            document.getElementById('pendingOrdersDetail').textContent = paymentStats.pendingOrders;
            document.getElementById('failedOrdersDetail').textContent = paymentStats.failedOrders;
            document.getElementById('cancelledOrdersDetail').textContent = paymentStats.cancelledOrders;

            // Generate and render tables
            renderRecentPaymentsTable();
            renderPaymentMethodTable();

            // Show section
            document.getElementById('paymentStatisticsDetail').classList.remove('hidden');
        }

        // Render recent payments table
        function renderRecentPaymentsTable() {
            const tableBody = document.getElementById('recentPaymentsTable');
            if (!tableBody) return;
            
            // Use the first 10 payment records from the existing mock data
            const recentPayments = paymentData.slice(0, 10);
            
            tableBody.innerHTML = '';
            
            recentPayments.forEach(payment => {
                const statusClass = {
                    completed: 'bg-green-500/30 text-green-300',
                    pending: 'bg-yellow-500/30 text-yellow-300',
                    failed: 'bg-red-500/30 text-red-300',
                    cancelled: 'bg-blue-500/30 text-blue-300',
                    refunded: 'bg-purple-500/30 text-purple-300'
                };
                
                const statusText = {
                    completed: '已完成',
                    pending: '待处理',
                    failed: '失败',
                    cancelled: '已取消',
                    refunded: '已退款'
                };
                
                const platformClass = {
                    paypal: 'bg-blue-500/30 text-blue-200',
                    pingpong: 'bg-green-500/30 text-green-200',
                    unknown: 'bg-gray-500/30 text-gray-200'
                };
                
                const platformText = {
                    paypal: 'PayPal',
                    pingpong: 'PingPong',
                    unknown: '未知平台'
                };
                
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-all cursor-pointer payment-row';
                row.dataset.paymentId = payment.id;
                row.innerHTML = `
                    <td class="text-white py-3 px-4 text-sm">${payment.id}</td>
                    <td class="text-white/80 py-3 px-4">${payment.user || '未知用户'}</td>
                    <td class="text-white py-3 px-4 font-medium">¥${payment.amount}</td>
                    <td class="py-3 px-4">
                        <span class="${platformClass[payment.paymentPlatform || 'unknown']} px-3 py-1 rounded-full text-xs">${platformText[payment.paymentPlatform || 'unknown']}</span>
                    </td>
                    <td class="py-3 px-4">
                        <span class="${statusClass[payment.status]} px-3 py-1 rounded-full text-xs">${statusText[payment.status] || payment.status}</span>
                    </td>
                    <td class="text-white/80 py-3 px-4 text-sm">${payment.createdAt}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Generate payment method distribution data
        function generatePaymentMethodData() {
            const paymentMethods = [
                { name: '支付宝', orders: 280, amount: 65000, percentage: 52.6 },
                { name: '微信支付', orders: 200, amount: 48000, percentage: 38.9 },
                { name: '银行卡', orders: 48, amount: 10456, percentage: 8.5 }
            ];
            
            return paymentMethods;
        }

        // Render payment method distribution table
        function renderPaymentMethodTable() {
            const tableBody = document.getElementById('paymentMethodTable');
            if (!tableBody) return;
            
            const paymentMethodData = generatePaymentMethodData();
            
            tableBody.innerHTML = '';
            
            paymentMethodData.forEach(method => {
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-all';
                row.innerHTML = `
                    <td class="text-white/80 py-3 px-4">${method.name}</td>
                    <td class="text-white py-3 px-4">${method.orders}</td>
                    <td class="text-white py-3 px-4 font-medium">¥${method.amount.toLocaleString()}</td>
                    <td class="text-white py-3 px-4">${method.percentage.toFixed(1)}%</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Load Server Info Data
        function loadServerInfoData() {
            // Calculate uptime
            const startTime = new Date(document.getElementById('startTime').textContent);
            const now = new Date();
            const diff = now - startTime;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

            // Update UI
            document.getElementById('serverUptime').textContent = `${days}天 ${hours}小时 ${minutes}分钟`;

            // Generate and render server resource history table
            renderServerResourceHistoryTable();

            // Show section
            document.getElementById('serverInfoDetail').classList.remove('hidden');
        }

        // Generate server resource history data
        function generateServerResourceHistoryData() {
            const history = [];
            const now = new Date();
            
            // Generate data for last 24 hours, every 2 hours
            for (let i = 11; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 2 * 60 * 60 * 1000);
                const cpuUsage = Math.floor(Math.random() * 50) + 10; // 10-60%
                const memoryUsage = Math.floor(Math.random() * 50) + 20; // 20-70%
                const diskUsage = Math.floor(Math.random() * 20) + 60; // 60-80%
                const networkTraffic = Math.floor(Math.random() * 1000) + 500; // 500-1500 MB
                
                history.push({
                    timestamp: time.toLocaleString('zh-CN'),
                    cpuUsage: `${cpuUsage}%`,
                    memoryUsage: `${memoryUsage}%`,
                    diskUsage: `${diskUsage}%`,
                    networkTraffic: `${networkTraffic} MB`
                });
            }
            
            return history;
        }

        // Render server resource history table
        function renderServerResourceHistoryTable() {
            const tableBody = document.getElementById('serverResourceHistoryTable');
            if (!tableBody) return;
            
            const resourceData = generateServerResourceHistoryData();
            
            tableBody.innerHTML = '';
            
            resourceData.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-all';
                row.innerHTML = `
                    <td class="text-white/80 py-3 px-4 text-sm">${item.timestamp}</td>
                    <td class="text-white py-3 px-4">${item.cpuUsage}</td>
                    <td class="text-white py-3 px-4">${item.memoryUsage}</td>
                    <td class="text-white py-3 px-4">${item.diskUsage}</td>
                    <td class="text-white py-3 px-4">${item.networkTraffic}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Load API Data
        function loadApiData(data) {
            // Mock API data based on endpoint
            const apiDataMap = {
                '/api/health': {
                    method: 'GET',
                    description: '服务健康检查',
                    params: '无请求参数',
                    responseExample: '{"status":"ok","timestamp":"2026-02-07T15:00:16.308Z"}'
                },
                '/api/bless': {
                    method: 'POST',
                    description: '申请加持服务',
                    params: '需要上传图片文件',
                    responseExample: '{"success":true,"blessingId":"BLESS20260207001","status":"processing"}'
                },
                '/api/stats': {
                    method: 'GET',
                    description: '获取统计数据',
                    params: '无请求参数',
                    responseExample: '{"totalBlessings":1234,"todayBlessings":89,"totalUsers":567}'
                },
                '/api/payments': {
                    method: 'GET',
                    description: '获取支付订单',
                    params: '无请求参数',
                    responseExample: '[{"id":"PAY20260207001","user":"张三","amount":100,"status":"completed","createdAt":"2026-02-07 10:30:00"}]'
                },
                '/api/payments/:id': {
                    method: 'GET',
                    description: '获取单个支付订单',
                    params: '需要订单ID参数',
                    responseExample: '{"id":"PAY20260207001","user":"张三","amount":100,"status":"completed","createdAt":"2026-02-07 10:30:00"}'
                }
            };

            const apiData = apiDataMap[data.endpoint] || {
                method: 'GET',
                description: 'API接口',
                params: '无请求参数',
                responseExample: '{"status":"ok"}'
            };

            // Update UI
            document.getElementById('apiMethod').textContent = apiData.method;
            document.getElementById('apiEndpoint').textContent = data.endpoint;
            document.getElementById('apiDescription').textContent = apiData.description;
            document.getElementById('apiParams').textContent = apiData.params;
            document.getElementById('apiResponseExample').textContent = apiData.responseExample;

            // Generate and render API request statistics table
            renderApiRequestStatsTable();

            // Show section
            document.getElementById('apiDetail').classList.remove('hidden');
        }

        // Generate API request statistics data
        function generateApiRequestStatsData() {
            const stats = [];
            const now = new Date();
            const endpoints = ['/api/health', '/api/bless', '/api/stats', '/api/payments'];
            const methods = ['GET', 'POST', 'PUT', 'DELETE'];
            const statusCodes = [200, 201, 400, 401, 404, 500];
            
            // Generate data for last 10 requests
            for (let i = 9; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60 * 1000); // Every minute
                const method = methods[Math.floor(Math.random() * methods.length)];
                const endpoint = endpoints[Math.floor(Math.random() * endpoints.length)];
                const statusCode = statusCodes[Math.floor(Math.random() * statusCodes.length)];
                const responseTime = Math.floor(Math.random() * 100) + 10; // 10-110ms
                
                stats.push({
                    time: time.toLocaleString('zh-CN'),
                    method: method,
                    endpoint: endpoint,
                    statusCode: statusCode,
                    responseTime: `${responseTime}ms`
                });
            }
            
            return stats;
        }

        // Render API request statistics table
        function renderApiRequestStatsTable() {
            const tableBody = document.getElementById('apiRequestStatsTable');
            if (!tableBody) return;
            
            const requestStatsData = generateApiRequestStatsData();
            
            tableBody.innerHTML = '';
            
            requestStatsData.forEach(request => {
                // Determine status code color
                let statusColor = 'bg-green-500/30 text-green-300';
                if (request.statusCode >= 400 && request.statusCode < 500) {
                    statusColor = 'bg-yellow-500/30 text-yellow-300';
                } else if (request.statusCode >= 500) {
                    statusColor = 'bg-red-500/30 text-red-300';
                }
                
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-all';
                row.innerHTML = `
                    <td class="text-white/80 py-3 px-4 text-sm">${request.time}</td>
                    <td class="py-3 px-4">
                        <span class="bg-blue-500/30 text-blue-300 px-3 py-1 rounded text-xs font-mono">${request.method}</span>
                    </td>
                    <td class="text-white py-3 px-4 font-mono">${request.endpoint}</td>
                    <td class="py-3 px-4">
                        <span class="${statusColor} px-3 py-1 rounded text-xs">${request.statusCode}</span>
                    </td>
                    <td class="text-white py-3 px-4">${request.responseTime}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Load Quick Action Data
        function loadQuickActionData(data) {
            // Update UI
            document.getElementById('quickActionTitle').textContent = data.title;
            document.getElementById('quickActionDescription').textContent = data.description;

            // Show section
            document.getElementById('quickActionDetail').classList.remove('hidden');
        }

        // Load Payment Data
        function loadPaymentData(data) {
            // Update UI
            document.getElementById('paymentId').textContent = data.id;
            document.getElementById('paymentUser').textContent = data.user;
            document.getElementById('paymentAmount').textContent = `¥${data.amount}`;
            
            // Update status with appropriate color
            const statusElement = document.getElementById('paymentStatus');
            const statusMap = {
                completed: { text: '已完成', class: 'bg-green-500/30 text-green-300' },
                pending: { text: '待处理', class: 'bg-yellow-500/30 text-yellow-300' },
                failed: { text: '失败', class: 'bg-red-500/30 text-red-300' }
            };
            
            const statusConfig = statusMap[data.status] || { text: data.status, class: 'bg-white/10 text-white' };
            statusElement.textContent = statusConfig.text;
            statusElement.className = `px-3 py-1 rounded-full text-sm ${statusConfig.class}`;
            
            document.getElementById('paymentCreatedAt').textContent = data.createdAt;

            // Generate and render payment event history table
            renderPaymentEventHistoryTable(data);

            // Show section
            document.getElementById('paymentDetail').classList.remove('hidden');
        }

        // Generate payment event history data
        function generatePaymentEventHistoryData(payment) {
            // Parse the createdAt string to Date object
            const createdAt = new Date(payment.createdAt);
            
            // Generate base event history (common for all statuses)
            const eventHistory = [
                {
                    time: new Date(createdAt.getTime()).toLocaleString('zh-CN'),
                    eventType: '订单创建',
                    status: '创建中',
                    description: '订单已创建，等待支付'
                },
                {
                    time: new Date(createdAt.getTime() + 5 * 1000).toLocaleString('zh-CN'),
                    eventType: '支付请求',
                    status: '处理中',
                    description: '支付请求已接收，正在处理'
                }
            ];
            
            // Generate status-specific events
            switch (payment.status) {
                case 'completed':
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 15 * 1000).toLocaleString('zh-CN'),
                        eventType: '支付验证',
                        status: '验证中',
                        description: '正在验证支付信息的有效性'
                    });
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 25 * 1000).toLocaleString('zh-CN'),
                        eventType: '支付完成',
                        status: '已完成',
                        description: `支付已完成，金额¥${payment.amount}`
                    });
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 30 * 1000).toLocaleString('zh-CN'),
                        eventType: '订单处理',
                        status: '处理中',
                        description: '订单已开始处理，准备生成加持服务'
                    });
                    break;
                    
                case 'pending':
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 10 * 1000).toLocaleString('zh-CN'),
                        eventType: '等待确认',
                        status: '待处理',
                        description: '等待支付网关确认支付结果'
                    });
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 20 * 1000).toLocaleString('zh-CN'),
                        eventType: '处理中',
                        status: '待处理',
                        description: '支付正在处理中，请耐心等待'
                    });
                    break;
                    
                case 'failed':
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 10 * 1000).toLocaleString('zh-CN'),
                        eventType: '支付验证失败',
                        status: '失败',
                        description: '支付信息验证失败'
                    });
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 15 * 1000).toLocaleString('zh-CN'),
                        eventType: '支付失败',
                        status: '失败',
                        description: `支付处理失败，金额¥${payment.amount}`
                    });
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 20 * 1000).toLocaleString('zh-CN'),
                        eventType: '订单关闭',
                        status: '已关闭',
                        description: '订单已关闭，可重新发起支付'
                    });
                    break;
                    
                case 'cancelled':
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 10 * 1000).toLocaleString('zh-CN'),
                        eventType: '支付请求取消',
                        status: '取消中',
                        description: '收到取消支付请求'
                    });
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 15 * 1000).toLocaleString('zh-CN'),
                        eventType: '支付取消',
                        status: '已取消',
                        description: `支付已取消，金额¥${payment.amount}`
                    });
                    eventHistory.push({
                        time: new Date(createdAt.getTime() + 20 * 1000).toLocaleString('zh-CN'),
                        eventType: '订单关闭',
                        status: '已关闭',
                        description: '订单已关闭'
                    });
                    break;
            }
            
            return eventHistory;
        }

        // Render payment event history table
        function renderPaymentEventHistoryTable(payment) {
            const tableBody = document.getElementById('paymentEventHistoryTable');
            if (!tableBody) return;
            
            const eventHistoryData = generatePaymentEventHistoryData(payment);
            
            tableBody.innerHTML = '';
            
            eventHistoryData.forEach(event => {
                // Determine status color
                let statusColor = 'bg-green-500/30 text-green-300';
                if (event.status === '处理中' || event.status === '创建中') {
                    statusColor = 'bg-yellow-500/30 text-yellow-300';
                } else if (event.status === '失败') {
                    statusColor = 'bg-red-500/30 text-red-300';
                }
                
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-all';
                row.innerHTML = `
                    <td class="text-white/80 py-3 px-4 text-sm">${event.time}</td>
                    <td class="text-white py-3 px-4">${event.eventType}</td>
                    <td class="py-3 px-4">
                        <span class="${statusColor} px-3 py-1 rounded-full text-xs">${event.status}</span>
                    </td>
                    <td class="text-white/70 py-3 px-4">${event.description}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Apply payment filter
        function applyPaymentFilter(e) {
            // Remove active class from all filters
            document.querySelectorAll('.payment-filter').forEach(filter => {
                filter.classList.remove('bg-white/20');
                filter.classList.add('bg-white/10');
            });
            
            // Add active class to clicked filter
            e.target.classList.remove('bg-white/10');
            e.target.classList.add('bg-white/20');
            
            // Filter payments based on selection
            const filter = e.target.dataset.filter;
            let filteredPayments = paymentData;
            
            if (filter !== 'all') {
                filteredPayments = paymentData.filter(payment => payment.status === filter);
            }
            
            renderPaymentTable(filteredPayments);
        }

        // Render payment table
        function renderPaymentTable(payments = paymentData) {
            const tbody = document.getElementById('paymentTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (payments.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-white/80 py-8 text-center">
                            <i class="fas fa-inbox text-4xl mb-2 opacity-50"></i>
                            <p>暂无支付记录</p>
                            <p class="text-sm opacity-70 mt-1">没有符合条件的支付订单</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            payments.forEach(payment => {
                const statusClass = {
                    completed: 'bg-green-500/30 text-green-200',
                    pending: 'bg-yellow-500/30 text-yellow-200',
                    failed: 'bg-red-500/30 text-red-200',
                    cancelled: 'bg-blue-500/30 text-blue-200',
                    refunded: 'bg-purple-500/30 text-purple-200'
                };
                
                const statusText = {
                    completed: '已完成',
                    pending: '待处理',
                    failed: '失败',
                    cancelled: '已取消',
                    refunded: '已退款'
                };
                
                const platformClass = {
                    paypal: 'bg-blue-500/30 text-blue-200',
                    pingpong: 'bg-green-500/30 text-green-200',
                    unknown: 'bg-gray-500/30 text-gray-200'
                };
                
                const platformText = {
                    paypal: 'PayPal',
                    pingpong: 'PingPong',
                    unknown: '未知平台'
                };
                
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-all cursor-pointer payment-row';
                row.dataset.paymentId = payment.id;
                row.innerHTML = `
                    <td class="text-white py-4 px-4">${payment.id}</td>
                    <td class="text-white/80 py-4 px-4">${payment.user || '未知用户'}</td>
                    <td class="text-white py-4 px-4 font-medium">¥${payment.amount}</td>
                    <td class="py-4 px-4">
                        <span class="${platformClass[payment.paymentPlatform || 'unknown']} px-3 py-1 rounded-full text-xs">${platformText[payment.paymentPlatform || 'unknown']}</span>
                    </td>
                    <td class="py-4 px-4">
                        <span class="${statusClass[payment.status] || 'bg-gray-500/30 text-gray-200'} px-3 py-1 rounded-full text-xs">${statusText[payment.status] || payment.status}</span>
                    </td>
                    <td class="text-white/80 py-4 px-4 text-sm">${payment.createdAt}</td>
                    <td class="py-4 px-4">
                        <button class="text-white/70 hover:text-white text-sm mr-3 view-payment-btn" data-payment-id="${payment.id}">
                            <i class="fas fa-eye mr-1"></i> 查看
                        </button>
                        <button class="text-white/70 hover:text-white text-sm">
                            <i class="fas fa-edit mr-1"></i> 编辑
                        </button>
                    </td>
                `;
                
                // Add event listener for view button
                const viewBtn = row.querySelector('.view-payment-btn');
                if (viewBtn) {
                    viewBtn.addEventListener('click', (e) => {
                        e.stopPropagation(); // Prevent row click event
                        showDetailPage('payment', payment);
                    });
                }
                
                tbody.appendChild(row);
            });
        }

        // Scroll to payment section
        function scrollToPaymentSection() {
            const paymentSection = document.querySelector('.glass:nth-child(4)');
            if (paymentSection) {
                paymentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Fetch data from API endpoints
        async function fetchData() {
            try {
                // Fetch dashboard data
                const dashboardResponse = await fetch('/api/admin/dashboard');
                const dashboardData = await dashboardResponse.json();
                
                // Update statistics cards with real data
                updateStatistics(dashboardData);
                
                console.log('数据获取成功:', dashboardData);
            } catch (error) {
                console.error('数据获取失败:', error);
                // Fallback to mock data if API fails
                useMockData();
            }
        }

        // Update statistics cards
        function updateStatistics(data) {
            // Calculate real statistics from paymentData
            const realStats = {
                totalRevenue: paymentData.reduce((sum, payment) => sum + payment.amount, 0),
                paymentCount: paymentData.length,
                completedCount: paymentData.filter(p => p.status === 'completed').length,
                pendingCount: paymentData.filter(p => p.status === 'pending').length,
                failedCount: paymentData.filter(p => p.status === 'failed').length,
                cancelledCount: paymentData.filter(p => p.status === 'cancelled').length
            };

            // Update system status
            const statusCard = document.querySelector('#dashboardPage .glass:nth-child(1)');
            if (statusCard) {
                const statusItems = statusCard.querySelectorAll('.flex.justify-between.items-center');
                if (statusItems[0]) {
                    const statusText = statusItems[0].querySelector('span:nth-child(2)');
                    if (statusText) {
                        // Use real status if available, otherwise default to running
                        const backendStatus = data.status?.backendService || 'running';
                        const statusMap = {
                            'running': '运行中',
                            'stopped': '已停止',
                            'error': '错误'
                        };
                        statusText.textContent = statusMap[backendStatus] || '未知';
                        statusText.className = `bg-${backendStatus === 'running' ? 'green' : backendStatus === 'error' ? 'red' : 'yellow'}-500/30 text-${backendStatus === 'running' ? 'green' : backendStatus === 'error' ? 'red' : 'yellow'}-300 px-3 py-1 rounded-full text-sm`;
                    }
                }
                if (statusItems[1]) {
                    const dbStatusText = statusItems[1].querySelector('span:nth-child(2)');
                    if (dbStatusText) {
                        // Use real status if available, otherwise default to connected
                        const dbStatus = data.status?.databaseConnection || 'connected';
                        const statusMap = {
                            'connected': '已连接',
                            'disconnected': '未连接',
                            'error': '错误'
                        };
                        dbStatusText.textContent = statusMap[dbStatus] || '未知';
                        dbStatusText.className = `bg-${dbStatus === 'connected' ? 'green' : 'red'}-500/30 text-${dbStatus === 'connected' ? 'green' : 'red'}-300 px-3 py-1 rounded-full text-sm`;
                    }
                }
                if (statusItems[2]) {
                    const frontendStatusText = statusItems[2].querySelector('span:nth-child(2)');
                    if (frontendStatusText) {
                        // Use real status if available, otherwise default to running
                        const frontendStatus = data.status?.frontendService || 'running';
                        const statusMap = {
                            'running': '运行中',
                            'stopped': '已停止',
                            'error': '错误'
                        };
                        frontendStatusText.textContent = statusMap[frontendStatus] || '未知';
                        frontendStatusText.className = `bg-${frontendStatus === 'running' ? 'green' : frontendStatus === 'error' ? 'red' : 'yellow'}-500/30 text-${frontendStatus === 'running' ? 'green' : frontendStatus === 'error' ? 'red' : 'yellow'}-300 px-3 py-1 rounded-full text-sm`;
                    }
                }
            }

            // Update system statistics
            const statsCard = document.querySelector('#dashboardPage .glass:nth-child(2)');
            if (statsCard) {
                const statsItems = statsCard.querySelectorAll('.flex.justify-between.items-center');
                if (statsItems[0]) {
                    const totalBlessings = statsItems[0].querySelector('span:nth-child(2)');
                    if (totalBlessings) {
                        // Use real blessing data if available, otherwise use 0
                        totalBlessings.textContent = (data.blessing?.totalBlessings || 0).toLocaleString();
                    }
                }
                if (statsItems[1]) {
                    const todayBlessings = statsItems[1].querySelector('span:nth-child(2)');
                    if (todayBlessings) {
                        // Use real blessing data if available, otherwise use 0
                        todayBlessings.textContent = (data.blessing?.todayBlessings || 0).toLocaleString();
                    }
                }
            }

            // Update payment statistics with real data
            const paymentStatsCard = document.querySelector('#dashboardPage .glass:nth-child(3)');
            if (paymentStatsCard) {
                const paymentStatsItems = paymentStatsCard.querySelectorAll('.flex.justify-between.items-center');
                if (paymentStatsItems[0]) {
                    const totalRevenue = paymentStatsItems[0].querySelector('span:nth-child(2)');
                    if (totalRevenue) {
                        // Use real revenue from paymentData
                        totalRevenue.textContent = `¥${realStats.totalRevenue.toLocaleString()}`;
                    }
                }
                if (paymentStatsItems[1]) {
                    const totalPayments = paymentStatsItems[1].querySelector('span:nth-child(2)');
                    if (totalPayments) {
                        // Use real payment count from paymentData
                        totalPayments.textContent = realStats.paymentCount.toLocaleString();
                    }
                }
            }

            // Update server info if available
            const serverCard = document.querySelector('#dashboardPage .glass:nth-child(4)');
            if (serverCard) {
                const serverInfoItems = serverCard.querySelectorAll('.flex.justify-between');
                serverInfoItems.forEach(item => {
                    const label = item.querySelector('span:nth-child(1)');
                    const value = item.querySelector('span:nth-child(2)');
                    if (label && value) {
                        if (label.textContent.includes('CPU使用率') && data.status?.cpuUsage !== undefined) {
                            value.textContent = `${data.status.cpuUsage}%`;
                        }
                        if (label.textContent.includes('内存使用率') && data.status?.memoryUsage !== undefined) {
                            value.textContent = `${data.status.memoryUsage}%`;
                        }
                        if (label.textContent.includes('磁盘空间') && data.status?.diskSpace !== undefined) {
                            value.textContent = `${data.status.diskSpace}%`;
                        }
                        if (label.textContent.includes('API响应时间') && data.status?.apiResponseTime !== undefined) {
                            value.textContent = `${data.status.apiResponseTime}ms`;
                        }
                    }
                });
            }

            // Update Detail Page statistics (order status distribution)
            const completedOrdersDetail = document.getElementById('completedOrdersDetail');
            if (completedOrdersDetail) {
                completedOrdersDetail.textContent = realStats.completedCount.toLocaleString();
            }
            
            const pendingOrdersDetail = document.getElementById('pendingOrdersDetail');
            if (pendingOrdersDetail) {
                pendingOrdersDetail.textContent = realStats.pendingCount.toLocaleString();
            }
            
            const failedOrdersDetail = document.getElementById('failedOrdersDetail');
            if (failedOrdersDetail) {
                failedOrdersDetail.textContent = realStats.failedCount.toLocaleString();
            }
            
            const cancelledOrdersDetail = document.getElementById('cancelledOrdersDetail');
            if (cancelledOrdersDetail) {
                cancelledOrdersDetail.textContent = realStats.cancelledCount.toLocaleString();
            }
            
            // Update success rate and average order value
            const successRateDetail = document.getElementById('successRateDetail');
            if (successRateDetail) {
                const successRate = realStats.paymentCount > 0 ? Math.round((realStats.completedCount / realStats.paymentCount) * 100) : 0;
                successRateDetail.textContent = `${successRate}%`;
            }
            
            const avgOrderValueDetail = document.getElementById('avgOrderValueDetail');
            if (avgOrderValueDetail) {
                const avgValue = realStats.completedCount > 0 ? Math.round(realStats.totalRevenue / realStats.completedCount) : 0;
                avgOrderValueDetail.textContent = `¥${avgValue}`;
            }
            
            // Update total revenue on detail page
            const totalRevenueDetail = document.getElementById('totalRevenueDetail');
            if (totalRevenueDetail) {
                totalRevenueDetail.textContent = `¥${realStats.totalRevenue.toLocaleString()}`;
            }
            
            // Update total orders on detail page
            const totalOrdersDetail = document.getElementById('totalOrdersDetail');
            if (totalOrdersDetail) {
                totalOrdersDetail.textContent = realStats.paymentCount.toLocaleString();
            }
        }

        // Use mock data if API fails
        function useMockData() {
            console.log('使用模拟数据');
            // Mock data is already in the HTML, no need to update
        }

        // Simulate real-time updates
        setInterval(() => {
            if (isLoggedIn) {
                fetchData();
            }
        }, 5000);

        // Initialize app on page load
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>