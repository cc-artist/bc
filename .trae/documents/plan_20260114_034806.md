# 修复"下载法相"无法下载的问题

## 问题分析

1. **问题原因**：

   * "下载法相"按钮调用的`handleDownload`函数是为"赛博佛祖开光结果"设计的

   * 该函数试图获取`.blessingBackgroundContainer`、背景图和物品图元素

   * 但在"求法相"功能中，模态框显示的是完全不同的DOM结构，没有这些元素

   * 函数会抛出"找不到预览容器元素"的错误

2. **代码结构**：

   * `handleDownload`函数位于第362行，用于处理图片下载

   * "下载法相"按钮位于第873-884行，调用该函数

   * "求法相"功能显示的是抽象佛祖图片，只有一个图片元素

## 修复方案

修改`handleDownload`函数，使其能够同时处理两种情况：

1. **当传入的是"求法相"的图片URL时**：

   * 直接下载该图片，不需要复杂的Canvas绘制

   * 使用简单的图片下载逻辑

2. **当传入的是"开光结果"的图片URL时**：

   * 继续使用现有的Canvas绘制逻辑

   * 保持原有的佛光效果合成功能

## 具体修改步骤

1. **修改`handleDownload`函数**（第362行）：

   * 添加参数类型判断

   * 当处理"求法相"图片时，使用简单的图片下载逻辑

   * 当处理"开光结果"图片时，继续使用原有逻辑

2. **确保函数能够处理两种不同的调用场景**：

   * 从"求法相"调用时，直接下载图片

   * 从"开光结果"调用时，合成并下载图片

## 预期效果

* "下载法相"按钮能够正常下载生成的抽象佛祖图片

* "下载开光图片"按钮继续保持原有功能

* 两种功能的下载逻辑清晰分离，互不影响

