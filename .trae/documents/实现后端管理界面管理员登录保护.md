# 实现后端管理界面管理员登录保护

## 1. 需求分析
- 当前后端管理界面 (`admin.html`) 完全开放，任何人都可以访问
- 需要添加管理员登录认证系统，保护敏感操作
- 确保只有授权管理员可以访问管理功能

## 2. 实现方案

### 2.1 后端实现
1. **创建认证相关文件**：
   - `src/controllers/authController.js` - 处理登录/登出逻辑
   - `src/routes/authRoutes.js` - 认证相关路由
   - `src/middleware/authMiddleware.js` - 认证中间件

2. **添加认证功能**：
   - 实现 `/api/v1/auth/login` 登录端点
   - 实现 `/api/v1/auth/logout` 登出端点
   - 实现 `/api/v1/auth/verify` 验证会话端点

3. **安全存储凭证**：
   - 在 `.env` 文件中配置管理员用户名和密码
   - 使用环境变量存储，避免硬编码

4. **保护 API 路由**：
   - 为管理相关 API 路由添加认证中间件
   - 确保只有认证用户可以执行管理操作

### 2.2 前端实现
1. **修改 `admin.html`**：
   - 添加登录页面/模态框
   - 实现登录表单和验证
   - 添加会话管理
   - 登录成功后显示管理界面
   - 添加登出功能

2. **前端认证逻辑**：
   - 存储认证状态（localStorage/sessionStorage）
   - 每次请求前验证认证状态
   - 认证失效时自动跳转到登录界面

### 2.3 安全措施
- 使用 HTTP 会话或 JWT 进行认证
- 密码验证（可选：加密存储）
- 会话超时机制
- 防止 CSRF 攻击

## 3. 技术栈
- **后端**：Express.js, express-session (或 JWT)
- **前端**：HTML5, JavaScript (原生)
- **安全**：环境变量配置, 会话管理

## 4. 实现步骤
1. 配置环境变量，添加管理员凭证
2. 创建后端认证控制器和路由
3. 实现认证中间件
4. 修改前端 `admin.html`，添加登录界面
5. 实现前端认证逻辑
6. 测试完整登录流程
7. 验证保护效果

## 5. 预期结果
- 访问 `admin.html` 时，首先显示登录页面
- 只有输入正确的管理员凭证才能访问管理功能
- 未认证用户无法访问保护的 API 端点
- 认证会话有适当的超时机制
- 界面美观，符合整体设计风格